\hypertarget{settrie_8h_source}{}\doxysection{settrie.\+h}
\label{settrie_8h_source}\index{settrie/settrie.h@{settrie/settrie.h}}
\mbox{\hyperlink{settrie_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/* Mercury-\/Settrie}}
\DoxyCodeLine{2 \textcolor{comment}{}}
\DoxyCodeLine{3 \textcolor{comment}{    Copyright 2023 Banco Bilbao Vizcaya Argentaria, S.A.}}
\DoxyCodeLine{4 \textcolor{comment}{}}
\DoxyCodeLine{5 \textcolor{comment}{    This product includes software developed at}}
\DoxyCodeLine{6 \textcolor{comment}{}}
\DoxyCodeLine{7 \textcolor{comment}{    BBVA (https://www.bbva.com/)}}
\DoxyCodeLine{8 \textcolor{comment}{}}
\DoxyCodeLine{9 \textcolor{comment}{      Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{10 \textcolor{comment}{    you may not use this file except in compliance with the License.}}
\DoxyCodeLine{11 \textcolor{comment}{    You may obtain a copy of the License at}}
\DoxyCodeLine{12 \textcolor{comment}{}}
\DoxyCodeLine{13 \textcolor{comment}{    http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{14 \textcolor{comment}{}}
\DoxyCodeLine{15 \textcolor{comment}{      Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{16 \textcolor{comment}{    distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{17 \textcolor{comment}{    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{18 \textcolor{comment}{    See the License for the specific language governing permissions and}}
\DoxyCodeLine{19 \textcolor{comment}{    limitations under the License.}}
\DoxyCodeLine{20 \textcolor{comment}{*/}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#ifndef INCLUDED\_SETTRIE}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define INCLUDED\_SETTRIE}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{preprocessor}{\#define IMAGE\_BUFF\_SIZE             6136}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{preprocessor}{\#define STATE\_IN\_USE                0}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#define STATE\_HAS\_SET\_ID            1}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define STATE\_IS\_GARBAGE            2}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{keyword}{typedef} uint64\_t                    \mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}};}
\DoxyCodeLine{38 \textcolor{keyword}{typedef} std::string                 \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{keyword}{typedef} std::vector<ElementHash>    \mbox{\hyperlink{settrie_8h_af424136aa4c1b72b8afe41d7483f225d}{BinarySet}};}
\DoxyCodeLine{41 \textcolor{keyword}{typedef} std::vector<String>         \mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}};}
\DoxyCodeLine{42 \textcolor{keyword}{typedef} std::vector<int>            \mbox{\hyperlink{settrie_8h_af4aa3b75d10f37f456ecdf6dbfa37373}{IdList}};}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \textcolor{keyword}{struct }\mbox{\hyperlink{structName}{Name}} \{}
\DoxyCodeLine{45     \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} \mbox{\hyperlink{structName_acb988588e0fc54f3e441e19a54bbdd5b}{name}};}
\DoxyCodeLine{46     \textcolor{keywordtype}{int} \mbox{\hyperlink{structName_a0ffcc8695bd1763dfe793b226234a7f9}{count}};}
\DoxyCodeLine{47 \};}
\DoxyCodeLine{48 }
\DoxyCodeLine{49 \textcolor{keyword}{typedef} std::map<ElementHash, Name> \mbox{\hyperlink{settrie_8h_a68c8861627fef1a9bc2191893891e3fa}{StringName}};}
\DoxyCodeLine{50 \textcolor{keyword}{typedef} std::map<int, String>       \mbox{\hyperlink{settrie_8h_a3a4755cedadd9190dfbf561607e09379}{IdMap}};}
\DoxyCodeLine{51 }
\DoxyCodeLine{52 \textcolor{keyword}{struct }\mbox{\hyperlink{structSetNode}{SetNode}} \{}
\DoxyCodeLine{53     \mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}} \mbox{\hyperlink{structSetNode_ac3144ba346ab105410b41c8e62ea2081}{value}};}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \textcolor{keywordtype}{int} \mbox{\hyperlink{structSetNode_a76c683e92438cc115239e007f207919f}{idx\_next}}, \mbox{\hyperlink{structSetNode_a1141e950332b4b23de6fefd5ab5e859d}{idx\_child}}, \mbox{\hyperlink{structSetNode_a47fc42c2af140243ed33c65d2db84a93}{idx\_parent}};}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     uint8\_t \mbox{\hyperlink{structSetNode_add0afde051e97bd50839387ca3b84cdb}{state}};}
\DoxyCodeLine{58 \};}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{keyword}{typedef} std::vector<SetNode>        \mbox{\hyperlink{settrie_8h_a53b014d3f3977bdf8135eadb64057248}{BinaryTree}};}
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{comment}{// This structure is 64encoded to 8K (3 input bytes == 24 bit -\/> 4 output chars == 24 bit). Therefore, its size is 6K.}}
\DoxyCodeLine{63 \textcolor{keyword}{struct }\mbox{\hyperlink{structImageBlock}{ImageBlock}} \{}
\DoxyCodeLine{64     \textcolor{keywordtype}{int} \mbox{\hyperlink{structImageBlock_a48354b392d1c4165199f91bb42035b6a}{size}}, \mbox{\hyperlink{structImageBlock_aff24f26b4fad29ee97fdc6583efa9075}{block\_num}};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     uint8\_t \mbox{\hyperlink{structImageBlock_aea384eb59b012becfd3140f332cf08da}{buffer}}[\mbox{\hyperlink{settrie_8h_a75cc8eb3d48ceda2913f0c5c9a39edc3}{IMAGE\_BUFF\_SIZE}}];       \textcolor{comment}{// makes sizeof(ImageBlock) == 6K}}
\DoxyCodeLine{67 \};}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{keyword}{typedef} std::vector<ImageBlock>     \mbox{\hyperlink{settrie_8h_a8b6bff08235702631ef0b98976b46dbb}{BinaryImage}};}
\DoxyCodeLine{70 \textcolor{keyword}{typedef} \mbox{\hyperlink{settrie_8h_a8b6bff08235702631ef0b98976b46dbb}{BinaryImage}}                 *\mbox{\hyperlink{settrie_8h_a31d667349d31ceb318e7264d03030e14}{pBinaryImage}};}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \textcolor{keyword}{class }\mbox{\hyperlink{classSetTrie}{SetTrie}} \{}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \textcolor{keyword}{public}:}
\DoxyCodeLine{76 }
\DoxyCodeLine{77         \mbox{\hyperlink{classSetTrie_ab9d60e396588d0ee8e702901e9cd65c4}{SetTrie}}() \{}
\DoxyCodeLine{78             \mbox{\hyperlink{structSetNode}{SetNode}} root = \{0, 0, 0, -\/1, \mbox{\hyperlink{settrie_8h_a0b83795e97ecf990661056d3afb6a8c9}{STATE\_IN\_USE}}\};}
\DoxyCodeLine{79             tree.push\_back(root);}
\DoxyCodeLine{80             \mbox{\hyperlink{classSetTrie_a49ddef07ea7ad4f6b9d396f06150123d}{num\_dirty\_nodes}} = 0;}
\DoxyCodeLine{81         \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83         \textcolor{keywordtype}{void}      \mbox{\hyperlink{classSetTrie_a9f5ef6dce39f8a0b32eed46acaa6b89a}{insert}}  (\mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} set, \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} \textcolor{keywordtype}{id});}
\DoxyCodeLine{84         \textcolor{keywordtype}{void}      \mbox{\hyperlink{classSetTrie_a9f5ef6dce39f8a0b32eed46acaa6b89a}{insert}}  (\mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} str, \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} str\_id, \textcolor{keywordtype}{char} split);}
\DoxyCodeLine{85         \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}}      \mbox{\hyperlink{classSetTrie_a17d79b5f61422b1bf4334e2bb4d95ebd}{find}}      (\mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} set);}
\DoxyCodeLine{86         \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}}      \mbox{\hyperlink{classSetTrie_a17d79b5f61422b1bf4334e2bb4d95ebd}{find}}      (\mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} str, \textcolor{keywordtype}{char} split);}
\DoxyCodeLine{87         \mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} \mbox{\hyperlink{classSetTrie_aea196ee6f4412c829e0a2ddda9fdeee1}{supersets}}   (\mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} set);}
\DoxyCodeLine{88         \mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} \mbox{\hyperlink{classSetTrie_aea196ee6f4412c829e0a2ddda9fdeee1}{supersets}}   (\mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} str, \textcolor{keywordtype}{char} split);}
\DoxyCodeLine{89         \mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} \mbox{\hyperlink{classSetTrie_a3f8fa6665e075164b3b6b2fc5c81210a}{subsets}}   (\mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} set);}
\DoxyCodeLine{90         \mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} \mbox{\hyperlink{classSetTrie_a3f8fa6665e075164b3b6b2fc5c81210a}{subsets}}   (\mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} str, \textcolor{keywordtype}{char} split);}
\DoxyCodeLine{91         \mbox{\hyperlink{settrie_8h_a635a5f230a424bcf4fa3f14cc8412286}{StringSet}} \mbox{\hyperlink{classSetTrie_ae45d8b4ff7900f5f3fbc0a47bcc8c5e0}{elements}} (\textcolor{keywordtype}{int} idx);}
\DoxyCodeLine{92         \textcolor{keywordtype}{int}       \mbox{\hyperlink{classSetTrie_a32f403cfdbdae4005c89eb7fbb2f8050}{remove}}  (\textcolor{keywordtype}{int} idx);}
\DoxyCodeLine{93         \textcolor{keywordtype}{int}       \mbox{\hyperlink{classSetTrie_ae83ad0dd6ecdbba2afcca8d66cd624df}{purge}}        ();}
\DoxyCodeLine{94         \textcolor{keywordtype}{bool}      \mbox{\hyperlink{classSetTrie_afbbe55ce4562af6eb035b7167275b3bc}{load}}      (\mbox{\hyperlink{settrie_8h_a31d667349d31ceb318e7264d03030e14}{pBinaryImage}} \&p\_bi);}
\DoxyCodeLine{95         \textcolor{keywordtype}{bool}      \mbox{\hyperlink{classSetTrie_a456f35f560383b7701b8bfb9d37e3660}{save}}      (\mbox{\hyperlink{settrie_8h_a31d667349d31ceb318e7264d03030e14}{pBinaryImage}} \&p\_bi);}
\DoxyCodeLine{96 }
\DoxyCodeLine{97         \mbox{\hyperlink{settrie_8h_a3a4755cedadd9190dfbf561607e09379}{IdMap}} \textcolor{keywordtype}{id}             = \{\};}
\DoxyCodeLine{98         \textcolor{keywordtype}{int}   \mbox{\hyperlink{classSetTrie_a49ddef07ea7ad4f6b9d396f06150123d}{num\_dirty\_nodes}};}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \textcolor{preprocessor}{\#ifndef TEST}}
\DoxyCodeLine{101     \textcolor{keyword}{private}:}
\DoxyCodeLine{102 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{classSetTrie_a9f5ef6dce39f8a0b32eed46acaa6b89a}{insert}}(\textcolor{keywordtype}{int} idx, \mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}} value) \{}
\DoxyCodeLine{105 }
\DoxyCodeLine{106         \textcolor{keywordflow}{if} (tree[idx].idx\_child == 0) \{}
\DoxyCodeLine{107             \mbox{\hyperlink{structSetNode}{SetNode}} node = \{value, 0, 0, idx, \mbox{\hyperlink{settrie_8h_a0b83795e97ecf990661056d3afb6a8c9}{STATE\_IN\_USE}}\};}
\DoxyCodeLine{108 }
\DoxyCodeLine{109             tree.push\_back(node);}
\DoxyCodeLine{110 }
\DoxyCodeLine{111             \textcolor{keywordtype}{int} idx\_c = tree.size() -\/ 1;}
\DoxyCodeLine{112 }
\DoxyCodeLine{113             tree[idx].idx\_child = idx\_c;}
\DoxyCodeLine{114 }
\DoxyCodeLine{115             \textcolor{keywordflow}{return} idx\_c;}
\DoxyCodeLine{116         \}}
\DoxyCodeLine{117 }
\DoxyCodeLine{118         idx = tree[idx].idx\_child;}
\DoxyCodeLine{119 }
\DoxyCodeLine{120         \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{121             \textcolor{keywordflow}{if} (tree[idx].value == value)}
\DoxyCodeLine{122                 \textcolor{keywordflow}{return} idx;}
\DoxyCodeLine{123 }
\DoxyCodeLine{124             \textcolor{keywordflow}{if} (tree[idx].idx\_next == 0) \{}
\DoxyCodeLine{125                 \mbox{\hyperlink{structSetNode}{SetNode}} node = \{value, 0, 0, tree[idx].idx\_parent, \mbox{\hyperlink{settrie_8h_a0b83795e97ecf990661056d3afb6a8c9}{STATE\_IN\_USE}}\};}
\DoxyCodeLine{126 }
\DoxyCodeLine{127                 tree.push\_back(node);}
\DoxyCodeLine{128 }
\DoxyCodeLine{129                 \textcolor{keywordtype}{int} idx\_c = tree.size() -\/ 1;}
\DoxyCodeLine{130 }
\DoxyCodeLine{131                 tree[idx].idx\_next = idx\_c;}
\DoxyCodeLine{132 }
\DoxyCodeLine{133                 \textcolor{keywordflow}{return} idx\_c;}
\DoxyCodeLine{134             \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136             idx = tree[idx].idx\_next;}
\DoxyCodeLine{137         \}}
\DoxyCodeLine{138     \}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{classSetTrie_a9f5ef6dce39f8a0b32eed46acaa6b89a}{insert}}(\mbox{\hyperlink{settrie_8h_af424136aa4c1b72b8afe41d7483f225d}{BinarySet}} set) \{}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         \textcolor{keywordtype}{int} idx  = 0;}
\DoxyCodeLine{143         \textcolor{keywordtype}{int} size = set.size();}
\DoxyCodeLine{144 }
\DoxyCodeLine{145         \textcolor{keywordflow}{if} (size == 0) \{}
\DoxyCodeLine{146             tree[0].state = \mbox{\hyperlink{settrie_8h_aece036d754241c812166a72096bd1d4f}{STATE\_HAS\_SET\_ID}};}
\DoxyCodeLine{147 }
\DoxyCodeLine{148             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{149         \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < size; i++)}
\DoxyCodeLine{152             idx = \mbox{\hyperlink{classSetTrie_a9f5ef6dce39f8a0b32eed46acaa6b89a}{insert}}(idx, set[i]);}
\DoxyCodeLine{153 }
\DoxyCodeLine{154         tree[idx].state = \mbox{\hyperlink{settrie_8h_aece036d754241c812166a72096bd1d4f}{STATE\_HAS\_SET\_ID}};}
\DoxyCodeLine{155 }
\DoxyCodeLine{156         \textcolor{keywordflow}{return} idx;}
\DoxyCodeLine{157     \}}
\DoxyCodeLine{158 }
\DoxyCodeLine{159     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{classSetTrie_a17d79b5f61422b1bf4334e2bb4d95ebd}{find}}(\textcolor{keywordtype}{int} idx, \mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}} value) \{}
\DoxyCodeLine{160 }
\DoxyCodeLine{161         \textcolor{keywordflow}{if} ((idx = tree[idx].idx\_child) == 0)}
\DoxyCodeLine{162             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{163 }
\DoxyCodeLine{164         \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{165             \textcolor{keywordflow}{if} (tree[idx].value == value)}
\DoxyCodeLine{166                 \textcolor{keywordflow}{return} idx;}
\DoxyCodeLine{167 }
\DoxyCodeLine{168             \textcolor{keywordflow}{if} ((idx = tree[idx].idx\_next) == 0)}
\DoxyCodeLine{169                 \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{170         \}}
\DoxyCodeLine{171     \}}
\DoxyCodeLine{172 }
\DoxyCodeLine{173     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{classSetTrie_a17d79b5f61422b1bf4334e2bb4d95ebd}{find}}(\mbox{\hyperlink{settrie_8h_af424136aa4c1b72b8afe41d7483f225d}{BinarySet}} set) \{}
\DoxyCodeLine{174 }
\DoxyCodeLine{175         \textcolor{keywordtype}{int} idx  = 0;}
\DoxyCodeLine{176         \textcolor{keywordtype}{int} size = set.size();}
\DoxyCodeLine{177 }
\DoxyCodeLine{178         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < size; i++)}
\DoxyCodeLine{179             \textcolor{keywordflow}{if} ((idx = \mbox{\hyperlink{classSetTrie_a17d79b5f61422b1bf4334e2bb4d95ebd}{find}}(idx, set[i])) == 0)}
\DoxyCodeLine{180                 \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{181 }
\DoxyCodeLine{182         \textcolor{keywordflow}{return} idx;}
\DoxyCodeLine{183     \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} all\_supersets(\textcolor{keywordtype}{int} t\_idx) \{}
\DoxyCodeLine{186 }
\DoxyCodeLine{187         \textcolor{keywordflow}{while} (t\_idx != 0) \{}
\DoxyCodeLine{188             \textcolor{keywordflow}{if} (tree[t\_idx].state == \mbox{\hyperlink{settrie_8h_aece036d754241c812166a72096bd1d4f}{STATE\_HAS\_SET\_ID}})}
\DoxyCodeLine{189                 result.push\_back(t\_idx);}
\DoxyCodeLine{190 }
\DoxyCodeLine{191             \textcolor{keywordflow}{if} (\textcolor{keywordtype}{int} ci = tree[t\_idx].idx\_child)}
\DoxyCodeLine{192                 all\_supersets(ci);}
\DoxyCodeLine{193 }
\DoxyCodeLine{194             t\_idx = tree[t\_idx].idx\_next;}
\DoxyCodeLine{195         \}}
\DoxyCodeLine{196     \}}
\DoxyCodeLine{197 }
\DoxyCodeLine{198     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classSetTrie_aea196ee6f4412c829e0a2ddda9fdeee1}{supersets}}(\textcolor{keywordtype}{int} t\_idx, \textcolor{keywordtype}{int} s\_idx) \{}
\DoxyCodeLine{199 }
\DoxyCodeLine{200         \textcolor{keywordflow}{while} (t\_idx != 0) \{}
\DoxyCodeLine{201             \mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}} t\_value, q\_value;}
\DoxyCodeLine{202 }
\DoxyCodeLine{203             \textcolor{keywordtype}{int} found = 0;}
\DoxyCodeLine{204 }
\DoxyCodeLine{205             \textcolor{keywordflow}{if} ((t\_value = tree[t\_idx].value) == (q\_value = query[s\_idx])) \{}
\DoxyCodeLine{206                 \textcolor{keywordflow}{if} (s\_idx == last\_query\_idx) \{}
\DoxyCodeLine{207 }
\DoxyCodeLine{208                     \textcolor{keywordflow}{if} (tree[t\_idx].state == \mbox{\hyperlink{settrie_8h_aece036d754241c812166a72096bd1d4f}{STATE\_HAS\_SET\_ID}})}
\DoxyCodeLine{209                         result.push\_back(t\_idx);}
\DoxyCodeLine{210 }
\DoxyCodeLine{211                     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{int} ci = tree[t\_idx].idx\_child)}
\DoxyCodeLine{212                         all\_supersets(ci);}
\DoxyCodeLine{213 }
\DoxyCodeLine{214                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{215                     found = 1;}
\DoxyCodeLine{216                     q\_value = query[s\_idx + 1];}
\DoxyCodeLine{217                 \}}
\DoxyCodeLine{218             \}}
\DoxyCodeLine{219 }
\DoxyCodeLine{220             \textcolor{keywordtype}{int} ni;}
\DoxyCodeLine{221             \textcolor{keywordflow}{if} (t\_value < q\_value \&\& (ni = tree[t\_idx].idx\_child) != 0)}
\DoxyCodeLine{222                 \mbox{\hyperlink{classSetTrie_aea196ee6f4412c829e0a2ddda9fdeee1}{supersets}}(ni, s\_idx + found);}
\DoxyCodeLine{223 }
\DoxyCodeLine{224             t\_idx = tree[t\_idx].idx\_next;}
\DoxyCodeLine{225         \}}
\DoxyCodeLine{226     \}}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classSetTrie_a3f8fa6665e075164b3b6b2fc5c81210a}{subsets}}(\textcolor{keywordtype}{int} t\_idx, \textcolor{keywordtype}{int} s\_idx) \{}
\DoxyCodeLine{229 }
\DoxyCodeLine{230         \textcolor{keywordflow}{while} (t\_idx != 0) \{}
\DoxyCodeLine{231             \mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}} t\_value;}
\DoxyCodeLine{232             \textcolor{keywordflow}{if} ((t\_value = tree[t\_idx].value) >= query[s\_idx]) \{}
\DoxyCodeLine{233                 \textcolor{keywordtype}{int} ns\_idx = s\_idx;}
\DoxyCodeLine{234 }
\DoxyCodeLine{235                 \textcolor{keywordflow}{while} (ns\_idx < last\_query\_idx \&\& query[ns\_idx] < t\_value)}
\DoxyCodeLine{236                     ns\_idx++;}
\DoxyCodeLine{237 }
\DoxyCodeLine{238                 \textcolor{keywordflow}{if} (query[ns\_idx] == t\_value) \{}
\DoxyCodeLine{239                     \textcolor{keywordflow}{if} (tree[t\_idx].state == \mbox{\hyperlink{settrie_8h_aece036d754241c812166a72096bd1d4f}{STATE\_HAS\_SET\_ID}})}
\DoxyCodeLine{240                         result.push\_back(t\_idx);}
\DoxyCodeLine{241 }
\DoxyCodeLine{242                     \textcolor{keywordtype}{int} ni;}
\DoxyCodeLine{243                     \textcolor{keywordflow}{if} ((ni = tree[t\_idx].idx\_child) != 0) \{}
\DoxyCodeLine{244                         ns\_idx++;}
\DoxyCodeLine{245 }
\DoxyCodeLine{246                         \textcolor{keywordflow}{if} (ns\_idx <= last\_query\_idx)}
\DoxyCodeLine{247                             \mbox{\hyperlink{classSetTrie_a3f8fa6665e075164b3b6b2fc5c81210a}{subsets}}(ni, ns\_idx);}
\DoxyCodeLine{248                     \}}
\DoxyCodeLine{249                 \}}
\DoxyCodeLine{250             \}}
\DoxyCodeLine{251 }
\DoxyCodeLine{252             t\_idx = tree[t\_idx].idx\_next;}
\DoxyCodeLine{253         \}}
\DoxyCodeLine{254     \}}
\DoxyCodeLine{255 }
\DoxyCodeLine{256     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} assign\_hh\_nam(\mbox{\hyperlink{settrie_8h_a28f4aaa17e343d8ab9244277194386d6}{ElementHash}} hh, \mbox{\hyperlink{settrie_8h_afbeda3fd1bdc8c37d01bdf9f5c8274ff}{String}} \&name) \{}
\DoxyCodeLine{257         StringName::iterator it = hh\_nam.find(hh);}
\DoxyCodeLine{258 }
\DoxyCodeLine{259         \textcolor{keywordflow}{if} (it == hh\_nam.end()) \{}
\DoxyCodeLine{260             hh\_nam[hh].count = 1;}
\DoxyCodeLine{261             hh\_nam[hh].name  = name; \}}
\DoxyCodeLine{262         \textcolor{keywordflow}{else}}
\DoxyCodeLine{263             hh\_nam[hh].count++;}
\DoxyCodeLine{264     \}}
\DoxyCodeLine{265 }
\DoxyCodeLine{266     \textcolor{keywordtype}{int} last\_query\_idx;}
\DoxyCodeLine{267 }
\DoxyCodeLine{268     \mbox{\hyperlink{settrie_8h_af424136aa4c1b72b8afe41d7483f225d}{BinarySet}}  query  = \{\};}
\DoxyCodeLine{269     \mbox{\hyperlink{settrie_8h_af4aa3b75d10f37f456ecdf6dbfa37373}{IdList}}       result = \{\};}
\DoxyCodeLine{270     \mbox{\hyperlink{settrie_8h_a53b014d3f3977bdf8135eadb64057248}{BinaryTree}} tree     = \{\};}
\DoxyCodeLine{271     \mbox{\hyperlink{settrie_8h_a68c8861627fef1a9bc2191893891e3fa}{StringName}} hh\_nam = \{\};}
\DoxyCodeLine{272 \};}
\DoxyCodeLine{273 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
